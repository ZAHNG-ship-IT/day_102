# 非线性数据结构 — 基础速查

适用语言：C（指针 + 动态内存为主）

## 线性 vs 非线性
- 线性：数组、链表、栈、队列。元素“一条线”顺序排列。
- 非线性：树、图、堆、Trie、并查集等。元素呈层次或网状关系。
- 选择：
  - 搜索/排序/范围统计→树/平衡树
  - TopK/调度→堆
  - 连通性/最短路→图/并查集
  - 字符串前缀/词典→Trie

## 链表（作为基础回顾）
- 单/双/循环；带哨兵简化边界；时间：查O(n)，头插头删O(1)。
- 常见：反转、合并、找环、K组反转。

## 树
- 术语：根/叶/高度/深度；二叉树、满/完全/平衡。
- 遍历：先序(根左右)、中序(左根右)、后序(左右根)、层序(BFS)。
- 二叉搜索树（BST）：左<根<右；查/插/删平均O(log n)，最坏退化O(n)。
- 平衡树（进阶）：AVL/红黑树保证O(log n)。
- 用途：有序数据、范围查询、排名/选择。

### C结构体骨架（BST）
```c
typedef struct TNode {
    int key;
    struct TNode *left, *right;
} TNode;

TNode* bst_insert(TNode* r, int k);
TNode* bst_find(TNode* r, int k);
TNode* bst_delete(TNode* r, int k); // 需处理两子树时的替换
void   bst_inorder(TNode* r);
```

## 堆（优先队列）
- 二叉堆（最大/最小）：完全二叉树，用数组存储。
- 操作：
  - 插入：上滤O(log n)
  - 删除堆顶：下滤O(log n)
  - 建堆：O(n)
- 应用：TopK、合并K个有序列表、任务调度。

### C骨架（数组实现最小堆）
```c
typedef struct {
    int *a; int size; int cap;
} MinHeap;

void heap_init(MinHeap* h, int cap);
void heap_push(MinHeap* h, int x);   // 上滤
int  heap_top(MinHeap* h);
int  heap_pop(MinHeap* h);           // 下滤
```

## 图
- 表示：
  - 邻接表（稀疏图高效）
  - 邻接矩阵（稠密图/小规模）
- 遍历：BFS（最短边数路径）、DFS（连通分量/拓扑/检测环）。
- 经典：
  - 拓扑排序（DAG）
  - 最短路：Dijkstra（非负权）、Bellman-Ford（可负权）、Floyd（多源）
  - 最小生成树：Kruskal（并查集）、Prim

### C骨架（邻接表）
```c
typedef struct Edge { int v, w; struct Edge* next; } Edge;

typedef struct { Edge** head; int n; } Graph; // 顶点0..n-1

Graph* graph_new(int n);
void   graph_add(Graph* g, int u, int v, int w); // 有向/无向按需双插
void   graph_bfs(Graph* g, int s);
void   graph_dfs(Graph* g, int s);
```

## 并查集（DSU/Union-Find）
- 维护动态连通性：合并两个集合、查询是否同属一集合。
- 优化：按秩合并 + 路径压缩，近似O(1)。

```c
typedef struct { int *fa, *rk; int n; } DSU;
void dsu_init(DSU* d, int n);
int  dsu_find(DSU* d, int x);
void dsu_union(DSU* d, int x, int y);
```

## Trie（字典树，选学）
- 用于字符串前缀/自动补全；每边代表一个字符，路径代表前缀。
- 时间：按字符串长度O(L)，空间较大（可用Map/数组子节点）。

```c
#define ALPHA 26

typedef struct TrieNode {
    struct TrieNode* ch[ALPHA];
    int end;
} TrieNode;
```

## 复杂度速查
- 树/平衡树：查插删 O(log n)
- 堆：插入/删顶 O(log n)，建堆 O(n)
- 图遍历：O(V+E)
- 并查集：近似 O(1)
- Trie：按字符串长度 O(L)

## 学习路径建议（配合C实现）
1) 复习链表与内存（你已完成）
2) 实现 BST（插入/查找/删除 + 中序/层序）
3) 实现二叉堆（数组 + 上下滤 + TopK练习）
4) 实现并查集（岛屿数量/冗余连接）
5) 图：邻接表 + BFS/DFS + 拓扑排序
6) 选学：Dijkstra/Kruskal、Trie

## 实战练习题（建议）
- BST：验证BST、最近公共祖先、二叉树层序/直径
- 堆：数据流中位数、前K大、合并K个有序链表
- 并查集：省份数量/朋友圈、冗余连接
- 图：课程表（拓扑排序）、最短路径（Dijkstra）

## 工具与调试
- 你的 `动态内存深入演示.c` 可用来观察地址与对齐。
- Windows：VS 诊断工具；Linux：valgrind 检漏。

---
更新：2025-08-28  按C语言实践整理
